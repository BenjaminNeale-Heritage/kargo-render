---
description: Installing Bookkeeper
---

# Installing Bookkeeper

## Basic installation

Installing Bookkeeper with default configuration is quick and easy.

You will need:

* A Kubernetes cluster: These instructions were tested with v1.25.2.
* [Helm](https://helm.sh/docs/): These instructions were tested with v3.10.0.

:::info
The Helm chart for Bookkeeper, much like Bookkeeper's container image, is hosted
in the GitHub Container Registry and is currently accessible only by Akuity
employees. This means you will need to log into the `ghcr.io` registry to
proceed, exactly as if you were going to pull a private image from there.

When Bookkeeper is eventually made public, this step will no longer be
necessary.
:::

Use the command `docker login ghcr.io` and follow the prompts. Use your GitHub
handle for the username and, for the password, use a
[personal access token](https://github.com/settings/tokens) with adequate
permissions to pull packages, then:

```shell
helm install bookkeeper \
  oci://ghcr.io/akuityio/bookkeeper-chart/bookkeeper \
  --version v0.1.0-alpha.1 \
  --create-namespace \
  --namespace bookkeeper \
  --wait
```

## Production-grade installation

:::caution
Bookkeeper isn't actually production-ready at this time.
:::

The instructions in the previous section are not suited for a production-grade
installation of Bookkeeper. Installing K8sTBookkeeperA for production use
requires some tweaking of the default configuration.

1. Extract the default configuration from the Helm chart and save it to a
   convenient location. In the example below, we save it to
   `~/bookkeeper-values.yaml`

   ```shell
   helm inspect values \
     oci://ghcr.io/akuityio/bookkeeper-chart/bookkeeper \
     --version v0.1.0-alpha.2 > ~/bookkeeper-values.yaml
   ```

1. Edit the saved configuration. The following settings are of particular
   interest for a production-grade deployment:

    * `host`: If you plan to enable the Bookkeeper server for standalone use,
      change the value of this setting to match the DNS name you intend to use.
      The Helm chart will use this setting in a number of places, so it is best
      if it is correct.

    * `service.type`: If you plan to enable the Bookkeeper server for standalone
      use _and do not plan to do so using an ingress controller_, change the
      value of this setting to `LoadBalancer`.

    * `tls.enabled`: Requests to Bookkeeper often include sensitive values, so
      Bookkeeper traffic should always be encrypted end-to-end. Leave the value
      of this setting as `true` _unless_ you are using a service mesh to
      guarantee mTLS within your cluster.

    * `tls.generateSelfSignedCert`: By default, the Bookkeeper server has TLS
      enabled and uses a self-signed cert that is generated by the Helm chart.
      Self-signed certificates are not trusted by clients, so unless you are
      using a service mesh to guarantee mTLS within your cluster, you should
      change the value of this setting to `false` and provide your own
      certificate instead.

      Two options exist for providing your own certificate. You may:

      * Base64 encode certificate and key material and add them to `tls.cert`
        and `tls.key`, respectively.

      * Provide a
        [TLS secret](https://kubernetes.io/docs/concepts/configuration/secret/#tls-secrets)
        named `bookkeeper-cert` in the same namespace as Bookkeeper. This secret
        could be created either manually or by means of a certificate manager.

    * `ingress.enabled`: If you plan to expose the Bookkeeper server for
      standalone use _and plan to do so using an ingress controller_, change the
      value of this setting to `true`.

    * `ingress.tls.generateSelfSignedCert`: If enabled, the Bookkeeper server's
      `Ingress` resource has TLS enabled by default and uses a self-signed cert
      that is generated by the Helm chart. Self-signed certificates are not
      trusted by clients, so if you plan to enable the Bookkeeper server for
      standalone use _and plan to do so using an ingress controller_, you should
      change the value of this setting to `false` and provide your own
      certificate instead.

      Two options exist for providing your own certificate. You may:

      * Base64 encode certificate and key material and add them to
        `ingress.tls.cert` and `ingress.tls.key`, respectively.

      * Provide a
        [TLS secret](https://kubernetes.io/docs/concepts/configuration/secret/#tls-secrets)
        named `bookkeeper-ingress-cert` in the same namespace as Bookkeeper.
        This secret could be created either manually or by means of a
        certificate manager.

   Although weâ€™ve covered the most critical settings, consider perusing
   `~/bookkeeper-values.yaml` further to discover other settings you may wish to
   fine tune. The file itself is liberally commented with detailed instructions.

1. Proceed with installation:

   ```shell
   helm install bookkeeper \
     oci://ghcr.io/akuityio/bookkeeper-chart/bookkeeper \
     --version v0.1.0-alpha.2 \
     --create-namespace \
     --namespace bookkeeper \
     --values ~/bookkeeper-values.yaml \
     --wait
   ```
